<app-dashboard-section-title
  [routs]="['vendor', 'ramassage', 'en cours']"
  title="Ramassage En Cours">
</app-dashboard-section-title>


<app-table [paginationInfo]="ramassagePaginationInfo" (paginate)="paginate()" xmlns="http://www.w3.org/1999/html">

  <div header>
    <app-table-head-vendor-colis/>
  </div>


  <div class="relative" body>
    <div *ngIf="actionShowing" id="drpDowActions" class="absolute left-0 z-10 min-w-44 mt-2 origin-top-left
         bg-gray-200 divide-y divide-gray-100 rounded-lg shadow-lg dark:bg-gray-500">

      <div>
        <div class="py-2 text-sm text-gray-700 dark:text-gray-200" aria-labelledby="dropdownDefaultButton">
          <button (click)="edit()"
                  class=" w-full flex justify-start px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white">
            <app-icon-helper iconName="edit" class="text-lg"></app-icon-helper>
            <span class="ms-5">Edit</span>
          </button>

          <button (click)="show()"
                  class=" w-full flex justify-start px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white">
            <app-icon-helper iconName="animated/eye" class="text-lg"></app-icon-helper>
            <span class="ms-5">Show</span>
          </button>

          <button (click)="delete()"
                  class=" w-full flex justify-start px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white">
            <app-icon-helper iconName="delete" class="text-lg"></app-icon-helper>
            <a class="ms-5">Delete</a>
          </button>

          <button (click)="cancelPickup()"
                  class=" w-full flex justify-start px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white">
            <app-icon-helper iconName="cancel-ramassage" class="text-lg"></app-icon-helper>
            <a class="ms-5">annuler ramassage</a>
          </button>

          <button (click)="hideActionDropDown()"
                  class="w-full flex justify-start px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white">
            <app-icon-helper iconName="animated/return" class="text-lg"></app-icon-helper>
            <a class="ms-5">cancel</a>
          </button>


        </div>
      </div>

    </div>
    <table *ngIf="!fetching;else show_fetching"
           class="w-full text-sm text-left rtl:text-right text-gray-500 dark:text-gray-400 divide-y divide-gray-200 dark:divide-gray-700">
      <thead class="text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400">
      <tr>
        <th scope="col" class="px-3 py-3">Actions</th>
        <th scope="col" class="px-3 py-3">Suivi Code</th>
        <th scope="col" class="px-3 min-w-64 py-3">Adresse</th>
        <th scope="col" class="px-3 py-3">Destinataire</th>
        <th scope="col" class="px-3 py-3">Marchandise</th>
        <th scope="col" class="px-3 py-3">Quantity</th>
        <th scope="col" class="px-3 py-3">Price</th>
        <th scope="col" class="px-3 py-3">Livraison Rate</th>
        <th scope="col" class="px-3 py-3">Fragile</th>
        <th scope="col" class="px-3 py-3">Openable</th>
        <th scope="col" class="px-3 py-3">Colis of Stock</th>
        <th scope="col" class="px-3 py-3">Colis of Replacement</th>
        <th scope="col" class="px-3 py-3">Ramassage Date</th>
        <th scope="col" class="px-3 py-3">Put in Stock Date</th>
        <th scope="col" class="px-3 py-3">Shipping Date</th>
        <th scope="col" class="px-3 py-3">Delivery Date</th>
        <th scope="col" class="px-3 py-3">City</th>
        <th scope="col" class="px-3 py-3">Etat</th>
        <th scope="col" class="px-3 py-3">Status</th>
        <th scope="col" class="px-3 py-3">Default Rate</th>
        <th scope="col" class="px-3 min-w-40 py-3">Colis Phones</th>
        <th scope="col" class="px-3 py-3 min-w-52">Created At</th>
        <th scope="col" class="px-3 py-3 min-w-52">Updated At</th>
      </tr>

      </thead>

      <tbody class=" divide-y  divide-gray-200 dark:divide-gray-700">


      <tr *ngFor="let colisItem of colisListCurrentPage"
          class=" odd:bg-white odd:dark:bg-gray-900 even:bg-gray-50 even:dark:bg-gray-800">

        <ng-container>
          <td class="relative px-3 py-4 ">
            <div class="flex justify-around items-center h-full">
              <button (click)="handelActions(colisItem)" class="text-gray-900 bg-white border border-gray-300
                  focus:outline-none hover:bg-gray-100 focus:ring-4 focus:ring-gray-100 font-medium
                  rounded-full text-sm p-1.5 dark:bg-gray-800 dark:text-white dark:border-gray-600
                  dark:hover:bg-gray-700 dark:hover:border-gray-600 dark:focus:ring-gray-700">
                <app-icon-helper class="text-l" iconName="animated/actions"></app-icon-helper>
              </button>
            </div>
          </td>
        </ng-container>


        <ng-container>
          <td>
            <app-table-cell [data]="colisItem.suiviCode"/>
          </td>
          <td>
            <app-table-cell [data]="colisItem.adresse"/>
          </td>
          <td>
            <app-table-cell [data]="colisItem.destinataire"/>
          </td>
          <td>
            <app-table-cell [data]="colisItem.marchandise"/>
          </td>
          <td>
            <app-table-cell [data]="colisItem.quantity"/>
          </td>
          <td>
            <app-table-cell [data]="colisItem.price"/>
          </td>
          <td>
            <app-table-cell [data]="colisItem.livraisonRate"/>
          </td>
          <td>
            <app-table-cell [data]="colisItem.fragile"/>
          </td>
          <td>
            <app-table-cell [data]="colisItem.openable"/>
          </td>
          <td>
            <app-table-cell [data]="colisItem.colisOfStock"/>
          </td>
          <td>
            <app-table-cell [data]="colisItem.colisOfReplacement"/>
          </td>
          <td>
            <app-table-cell [data]="colisItem.ramassageDate | date: 'short'"/>
          </td>
          <td>
            <app-table-cell [data]="colisItem.putInStockDate | date: 'short'"/>
          </td>
          <td>
            <app-table-cell [data]="colisItem.shippingDate | date: 'short'"/>
          </td>
          <td>
            <app-table-cell [data]="colisItem.deliveryDate | date: 'short'"/>
          </td>
          <td>
            <app-table-cell *ngIf="colisItem.status; else noData" [data]="colisItem.city.name"/>
          </td>
          <td>
            <app-table-cell *ngIf="colisItem.etat; else noData" [data]="colisItem.etat.name"/>
          </td>
          <td>
            <app-table-cell *ngIf="colisItem.status; else noData" [data]="colisItem.status.name"/>
          </td>
          <td>

            <app-table-cell *ngIf="colisItem.defaultRate; else noData" [data]="colisItem.defaultRate.rate"/>

          </td>
          <td>
            <app-table-cell *ngFor="let phone of colisItem.colisPhones" [dataList]="true" [data]="phone.number"/>
          </td>
          <td>
            <app-table-cell [data]="colisItem.createdAt | date: 'short'"/>
          </td>
          <td>
            <app-table-cell [data]="colisItem.updatedAt | date: 'short'"/>
          </td>
        </ng-container>


      </tr>


      </tbody>

    </table>

    <ng-template #show_fetching>
      <div class="h-[30vh] w-full flex items-center justify-center">
      </div>
    </ng-template>

  </div>


</app-table>

<ng-template #noData>
  <app-table-cell/>
</ng-template>

<app-home-spinner *ngIf="loading"></app-home-spinner>
<app-home-spinner *ngIf="fetching"></app-home-spinner>
<app-add-vendor-colis></app-add-vendor-colis>








